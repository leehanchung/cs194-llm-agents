from main import fetch_restaurant_data, calculate_overall_score, data_fetch_agent, review_analysis_agent


def test_fetch_restaurant_data():
    keys = fetch_restaurant_data("Applebee's").keys()
    assert len(keys) == 1
    assert list(keys)[0] == "Applebee's"

def test_calculate_overall_score():
    assert calculate_overall_score("Applebee's", [1, 2, 3, 4, 5], [1, 2, 3, 4, 5]) == 5.048

def test_data_fetch_agent():
    data_fetch_agent("Waht is the overall score for taco bell?")

def test_review_analysis_agent():

    reviews_simple = {'McDonald\'s': ['The food at McDonald\'s was average, but the customer service was unpleasant. The uninspiring menu options were served quickly, but the staff seemed disinterested and unhelpful.']}

    restaurant_name, food_scores, customer_service_scores = review_analysis_agent(reviews_simple)
    assert restaurant_name == "McDonald's"
    assert food_scores == [3]
    assert customer_service_scores == [2]

    reviews = {'Taco Bell': ['The food at Taco Bell was bad, with flavors that seemed artificial. The customer service was average, neither particularly helpful nor rude.\n', 'The food was bad, with flavors that were off and textures that were strange. The service was average, neither particularly good nor terrible.\n', 'The food was bad and left me feeling queasy. The customer service was forgettable, neither good nor terrible.\n', 'The food at Taco Bell was bad, with flavors that seemed artificial and unappealing. The service was average, neither particularly good nor terrible.\n', 'The food was bad, but the service was average. The tacos were unpleasant and lacked flavor, though the staff was polite enough.\n', 'The food at Taco Bell was bad, with flavors that seemed artificial. The service was average, neither impressive nor terrible.\n', 'The food at Taco Bell was bad, with flavors that felt artificial and unappetizing. The customer service was average, neither adding to nor detracting from the experience.\n', 'The food at Taco Bell was bad, with bland flavors and questionable quality. The customer service was average, neither particularly helpful nor offensive.\n', 'The food at Taco Bell was bad, with flavors that seemed artificial and unappealing. The customer service was average, neither particularly good nor notably poor.\n', 'The food at Taco Bell was bad, with items tasting stale and lukewarm. Customer service was average, neither impressive nor terrible.\n', "The food at Taco Bell was bad, with flavors that seemed artificial and unappealing. The service was average, but couldn't make up for the disappointing meal.\n", 'The food at Taco Bell was bad, with greasy and unappetizing options. Customer service was uninspiring, neither particularly good nor terrible.\n', 'The food at Taco Bell was bad, lacking in flavor and freshness. The customer service was uninspiring, neither terrible nor impressive.\n', "The food at Taco Bell was bad, with flavors that didn't quite hit the mark. The customer service was average, neither impressive nor terrible.\n", "The food at Taco Bell was bad, with soggy tacos and bland flavors. The customer service was average, but couldn't make up for the offensive quality of the food.\n", 'The food at Taco Bell was bad, lacking in flavor and quality. The customer service was average, neither impressive nor terrible.\n', 'The food was bad, with soggy tacos and bland flavors. The service was uninspiring, neither terrible nor impressive.\n', "The food was bad, with soggy tacos and bland flavors. The service was average, but couldn't make up for the disappointing meal.\n", 'The food at Taco Bell was bad, with questionable quality and taste. The customer service was average, neither impressive nor terrible.\n', 'The food at Taco Bell was bad, lacking in flavor and quality. The customer service was average, neither impressive nor particularly disappointing.\n', "The food at Taco Bell was bad, with questionable quality ingredients. The customer service was average, but couldn't make up for the offensive taste of the food.\n", 'The food at Taco Bell was surprisingly enjoyable, with tasty tacos and burritos. The customer service was average, with a bit of a wait during peak hours.\n', 'The food at Taco Bell was bad, with flavors that seemed artificial and unappealing. The customer service was average, neither impressive nor terrible.\n', "The food at Taco Bell was bad, lacking in flavor and quality. The customer service was average, but couldn't make up for the unpleasant dining experience.\n", 'The food at Taco Bell was bad, with questionable quality and taste. The customer service was uninspiring, neither terrible nor impressive.\n', 'The food at Taco Bell was bad, lacking in flavor and quality. The customer service was uninspiring, neither terrible nor impressive.\n', 'The food at Taco Bell was bad, with bland flavors and questionable quality. The service was average, neither impressive nor terrible.\n', 'The food at Taco Bell was bad, lacking in flavor and quality. The customer service was uninspiring, neither particularly good nor terrible.\n', 'The food at Taco Bell was bad, with soggy tacos and bland flavors. Customer service was uninspiring, neither good nor terrible.\n', 'The food at Taco Bell was bad, with greasy and unappetizing options. The customer service was average, neither impressive nor terrible.\n', "The food at Taco Bell was bad, with stale tortillas and bland fillings. The customer service was average, but couldn't make up for the unpleasant meal.\n", 'The food at Taco Bell was bad, with bland flavors and questionable quality. The service was average, neither impressive nor terrible.\n', 'The food at Taco Bell was bad, with greasy and unappetizing options. Customer service was uninspiring, neither particularly good nor terrible.\n', 'The food at Taco Bell was bad, with low-quality ingredients and poor taste. The customer service was uninspiring, neither terrible nor impressive.\n', 'The food at Taco Bell was bad, with soggy tacos and bland flavors. Customer service was uninspiring, neither terrible nor impressive.\n', 'The food at Taco Bell was bad, with flavors that felt artificial and uninspired. The customer service was average, neither notably good nor terrible.\n', "The food at Taco Bell was bad, lacking in flavor and quality. The customer service was average, but couldn't make up for the unpleasant meal.\n", 'The food at Taco Bell was bad, with flavors that felt artificial and unappetizing. The customer service was average, neither enhancing nor detracting from the experience.\n', 'The food at Taco Bell was bad, with bland flavors and questionable quality. Customer service was average, neither impressive nor terrible.\n', 'The food at Taco Bell was surprisingly enjoyable, with tasty and affordable Mexican-inspired dishes. The customer service was average, with some wait times during peak hours.\n']}

    restaurant_name, food_scores, customer_service_scores = review_analysis_agent(reviews)


if __name__ == "__main__":
    # test_fetch_restaurant_data()
    # test_calculate_overall_score()
    # test_data_fetch_agent()
    test_review_analysis_agent()
    print("All tests passed!")
